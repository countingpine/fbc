<html>
<head>
<title>Operator New</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div id="fb_body_wrapper">
<div id="fb_tab">
<div id="fb_tab_l">Operator New</div>
<div id="fb_tab_r">&nbsp;<img src="images/fblogo_mini.gif" /></div> 
</div> 
<div id="fb_pg_wrapper">
<div id="fb_pg_body">
	Operator to dynamically allocate memory and construct data of a specified type<br \>
<br \>
<div class="fb_sect_title">Syntax</div><div class="fb_sect_cont"><tt><br \>
<a href="KeyPgDeclare.html">Declare</a> <a href="KeyPgOperator.html">Operator</a> <b>New</b> ( <i>size</i> <a href="KeyPgAs.html">As</a> <a href="KeyPgUinteger.html">UInteger</a> ) <a href="KeyPgAs.html">As</a> <a href="KeyPgAny.html">Any</a> <a href="KeyPgPtr.html">Ptr</a><br \>
<a href="KeyPgDeclare.html">Declare</a> <a href="KeyPgOperator.html">Operator</a> <b>new[]</b> ( <i>size</i> <a href="KeyPgAs.html">As</a> <a href="KeyPgUinteger.html">UInteger</a> ) <a href="KeyPgAs.html">As</a> <a href="KeyPgAny.html">Any</a> <a href="KeyPgPtr.html">Ptr</a><br \>
</tt><br \>
</div><div class="fb_sect_title">Usage</div><div class="fb_sect_cont"><tt><br \>
<i>result</i> = <b>New</b> <i><a href="DataType.html">datatype</a></i><br \>
<div class="fb_indent"><i>or</i><br \>
</div><i>result</i> = <b>New</b> <i><a href="DataType.html">datatype</a></i> ( <i>initializers</i>, ... )<br \>
<div class="fb_indent"><i>or</i><br \>
</div><i>result</i> = <b>New</b> <i><a href="DataType.html">datatype</a></i><b>[</b> <i>count</i> <b>]</b><br \>
</tt><br \>
</div><div class="fb_sect_title">Parameters</div><div class="fb_sect_cont"><br \>
<tt><i>size</i></tt> <br \>
<div class="fb_indent">Number of bytes to allocate.<br \>
</div><tt><i>initializers</i></tt><br \>
<div class="fb_indent">Initial value(s) for the variable.<br \>
</div><tt><i>datatype</i></tt><br \>
<div class="fb_indent">Name of the data type to create.<br \>
</div><tt><i>count</i></tt><br \>
<div class="fb_indent">Exact number of elements to allocate.<br \>
<br \>
</div></div><div class="fb_sect_title">Return Value</div><div class="fb_sect_cont"><br \>
A pointer of type <a href="DataType.html">datatype</a> to the newly allocated data.<br \>
<br \>
</div><div class="fb_sect_title">Description</div><div class="fb_sect_cont"><br \>
The <tt><b>New</b></tt> operator dynamically allocates memory and constructs a specified data type. For simple types, like integers, an initial value can be given. For types without constructors, initial values can be specified for each field. Types that have constructors can have their constructors called by <tt><b>New</b></tt> as well. If no initializers are given, the default values for those types will be set.<br \>
<br \>
<tt><b>New[]</b></tt> is the array-version of the <tt><b>New</b></tt> operator and allocates enough memory for the specified number of objects.  The default constructor for the type will be used to set the initial values for each item.<br \>
<br \>
Objects created with <tt><b>New</b></tt> must be freed with <tt><a href="KeyPgOpDelete.html">Delete</a></tt>. Memory allocated with <tt><b>New[]</b></tt> must be freed with <tt><b>Delete[]</b></tt>, the array-version of <tt><a href="KeyPgOpDelete.html">Delete</a></tt>. You cannot mix and match the different versions of the operators.<br \>
<br \>
Specifying an initial value of <tt><a href="KeyPgAny.html">Any</a></tt>, as in <tt>new datatype(any)</tt> will allocate memory for the type, but not initialize the data.  This is only valid on data types that do not have constructors.<br \>
<br \>
Specifying an initial value of <tt><a href="KeyPgAny.html">Any</a></tt>, as in <tt>new datatype[count]{any}</tt> will allocate memory for the array, but not initialize the data.  This is only valid on data types that do not have constructors.<br \>
<br \>
</div><div class="fb_sect_title">Example</div><div class="fb_sect_cont"><br \>
<tt><div class="freebasic">
<span class="key">Type</span>&nbsp;<span class="wrd">Rational</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="wrd">numerator</span><span class="oth">,</span>&nbsp;<span class="wrd">denominator</span><br />
<span class="key">End</span>&nbsp;<span class="key">Type</span><br />
<br />
<span class="key">Scope</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="com">'&nbsp;Create&nbsp;and&nbsp;initialize&nbsp;a&nbsp;Rational,&nbsp;and&nbsp;store&nbsp;it's&nbsp;address.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Dim</span>&nbsp;<span class="wrd">p</span>&nbsp;<span class="key">As</span>&nbsp;<span class="wrd">Rational</span>&nbsp;<span class="key">Ptr</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="key">New</span>&nbsp;<span class="wrd">Rational</span><span class="oth">(</span><span class="num">3</span><span class="oth">,</span>&nbsp;<span class="num">4</span><span class="oth">)</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Print</span>&nbsp;<span class="wrd">p</span><span class="oth">-&gt;</span><span class="wrd">numerator</span>&nbsp;<span class="oth">&amp;</span>&nbsp;<span class="quo">"/"</span>&nbsp;<span class="oth">&amp;</span>&nbsp;<span class="wrd">p</span><span class="oth">-&gt;</span><span class="wrd">denominator</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="com">'&nbsp;Destroy&nbsp;the&nbsp;rational&nbsp;and&nbsp;give&nbsp;its&nbsp;memory&nbsp;back&nbsp;to&nbsp;the&nbsp;system.&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Delete</span>&nbsp;<span class="wrd">p</span><br />
<br />
<span class="key">End</span>&nbsp;<span class="key">Scope</span><br />
<br />
<span class="key">Scope</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="com">'&nbsp;Allocate&nbsp;memory&nbsp;for&nbsp;100&nbsp;integers,&nbsp;store&nbsp;the&nbsp;address&nbsp;of&nbsp;the&nbsp;first&nbsp;one.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Dim</span>&nbsp;<span class="wrd">p</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span>&nbsp;<span class="key">Ptr</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="key">New</span>&nbsp;<span class="key">Integer</span><span class="oth">[</span><span class="num">100</span><span class="oth">]</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="com">'&nbsp;Assign&nbsp;some&nbsp;values&nbsp;to&nbsp;the&nbsp;integers&nbsp;in&nbsp;the&nbsp;array.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">For</span>&nbsp;<span class="wrd">i</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="num">0</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">99</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="wrd">p</span><span class="oth">[</span><span class="wrd">i</span><span class="oth">]</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="wrd">i</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Next</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="com">'&nbsp;Free&nbsp;the&nbsp;entire&nbsp;integer&nbsp;array.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Delete</span><span class="oth">[]</span>&nbsp;<span class="wrd">p</span><br />
<br />
<span class="key">End</span>&nbsp;<span class="key">Scope</span><br />
</div></tt><br />
</div><div class="fb_sect_title">Dialect Differences</div><div class="fb_sect_cont"><br \>
<ul><li> Only available in the <i><a href="CompilerOptlang.html">-lang fb</a></i> dialect.<br \>
<br \>
</ul></div><div class="fb_sect_title">Differences from QB</div><div class="fb_sect_cont"><br \>
<ul><li> New to FreeBASIC<br \>
<br \>
</ul></div><div class="fb_sect_title">See also</div><div class="fb_sect_cont"><br \>
<ul><li> <tt><a href="KeyPgOpDelete.html">Delete</a></tt><br \>
<li> <tt><a href="KeyPgOpPlacementNew.html">Placement New</a></tt><br \>
<br \>
</ul></div>
</div>
</div> 
</div> 
</body>
</html>
